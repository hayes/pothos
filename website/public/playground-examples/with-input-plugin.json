{
  "id": "with-input-plugin",
  "title": "With-Input Plugin",
  "description": "Use the With-Input plugin to easily define fields with a single input object",
  "tags": [],
  "files": [
    {
      "filename": "schema.ts",
      "content": "import SchemaBuilder from '@pothos/core';\nimport WithInputPlugin from '@pothos/plugin-with-input';\n\nconst builder = new SchemaBuilder({\n  plugins: [WithInputPlugin],\n  withInput: {\n    typeOptions: {\n      // default options for Input object types\n    },\n  },\n});\n\n// User type\nconst User = builder.objectRef<{\n  id: string;\n  username: string;\n  email: string;\n  age: number;\n}>('User');\n\nbuilder.objectType(User, {\n  fields: (t) => ({\n    id: t.exposeID('id'),\n    username: t.exposeString('username'),\n    email: t.exposeString('email'),\n    age: t.exposeInt('age'),\n  }),\n});\n\n// Post type\nconst Post = builder.objectRef<{\n  id: string;\n  title: string;\n  content: string;\n  authorId: string;\n}>('Post');\n\nbuilder.objectType(Post, {\n  fields: (t) => ({\n    id: t.exposeID('id'),\n    title: t.exposeString('title'),\n    content: t.exposeString('content'),\n    authorId: t.exposeID('authorId'),\n  }),\n});\n\n// Query\nbuilder.queryType({\n  fields: (t) => ({\n    // Simple field with input\n    findUser: t.fieldWithInput({\n      input: {\n        id: t.input.id({ required: true }),\n      },\n      type: User,\n      nullable: true,\n      resolve: (_, args) => {\n        // The input is automatically under args.input\n        if (args.input.id === '1') {\n          return {\n            id: '1',\n            username: 'johndoe',\n            email: 'john@example.com',\n            age: 30,\n          };\n        }\n        return null;\n      },\n    }),\n\n    // Field with multiple input fields\n    searchUsers: t.fieldWithInput({\n      input: {\n        username: t.input.string(),\n        email: t.input.string(),\n        minAge: t.input.int(),\n        maxAge: t.input.int(),\n      },\n      type: [User],\n      resolve: (_, args) => {\n        // Mock search - in production this would query a database\n        return [\n          {\n            id: '1',\n            username: 'johndoe',\n            email: 'john@example.com',\n            age: 30,\n          },\n          {\n            id: '2',\n            username: 'janedoe',\n            email: 'jane@example.com',\n            age: 28,\n          },\n        ].filter((user) => {\n          if (args.input.username && !user.username.includes(args.input.username)) {\n            return false;\n          }\n          if (args.input.email && !user.email.includes(args.input.email)) {\n            return false;\n          }\n          if (args.input.minAge !== undefined && args.input.minAge !== null && user.age < args.input.minAge) {\n            return false;\n          }\n          if (args.input.maxAge !== undefined && args.input.maxAge !== null && user.age > args.input.maxAge) {\n            return false;\n          }\n          return true;\n        });\n      },\n    }),\n\n    // Custom input type name and arg name\n    findPost: t.fieldWithInput({\n      typeOptions: {\n        name: 'FindPostInput',\n      },\n      argOptions: {\n        name: 'criteria',\n      },\n      input: {\n        id: t.input.id({ required: true }),\n      },\n      type: Post,\n      nullable: true,\n      resolve: (_, args) => {\n        // Now the input is under args.criteria instead of args.input\n        if (args.criteria.id === '1') {\n          return {\n            id: '1',\n            title: 'Getting Started with Pothos',\n            content: 'Learn how to build type-safe GraphQL schemas',\n            authorId: '1',\n          };\n        }\n        return null;\n      },\n    }),\n  }),\n});\n\n// Mutation\nbuilder.mutationType({\n  fields: (t) => ({\n    // Create user with input\n    createUser: t.fieldWithInput({\n      input: {\n        username: t.input.string({ required: true }),\n        email: t.input.string({ required: true }),\n        password: t.input.string({ required: true }),\n        age: t.input.int({ required: true }),\n      },\n      type: User,\n      resolve: (_, args) => {\n        return {\n          id: '3',\n          username: args.input.username,\n          email: args.input.email,\n          age: args.input.age,\n        };\n      },\n    }),\n\n    // Update user with input\n    updateUser: t.fieldWithInput({\n      input: {\n        id: t.input.id({ required: true }),\n        username: t.input.string(),\n        email: t.input.string(),\n        age: t.input.int(),\n      },\n      type: User,\n      resolve: (_, args) => {\n        return {\n          id: args.input.id,\n          username: args.input.username || 'updated_user',\n          email: args.input.email || 'updated@example.com',\n          age: args.input.age ?? 25,\n        };\n      },\n    }),\n\n    // Create post with input\n    createPost: t.fieldWithInput({\n      input: {\n        title: t.input.string({ required: true }),\n        content: t.input.string({ required: true }),\n        authorId: t.input.id({ required: true }),\n      },\n      type: Post,\n      resolve: (_, args) => {\n        return {\n          id: '2',\n          title: args.input.title,\n          content: args.input.content,\n          authorId: args.input.authorId,\n        };\n      },\n    }),\n  }),\n});\n\nexport const schema = builder.toSchema();",
      "language": "typescript"
    }
  ],
  "defaultQuery": "# Find a user by ID\nquery FindUser {\n  findUser(input: { id: \"1\" }) {\n    id\n    username\n    email\n    age\n  }\n}\n\n# Search users with filters\nquery SearchUsers {\n  searchUsers(input: { minAge: 25, maxAge: 35 }) {\n    id\n    username\n    age\n  }\n}\n\n# Find a post using custom arg name\nquery FindPost {\n  findPost(criteria: { id: \"1\" }) {\n    id\n    title\n    content\n  }\n}\n\n# Create a new user\nmutation CreateUser {\n  createUser(\n    input: {\n      username: \"newuser\"\n      email: \"newuser@example.com\"\n      password: \"SecurePass123\"\n      age: 25\n    }\n  ) {\n    id\n    username\n    email\n  }\n}\n\n# Update a user\nmutation UpdateUser {\n  updateUser(input: { id: \"1\", email: \"newemail@example.com\" }) {\n    id\n    username\n    email\n  }\n}",
  "queries": [
    {
      "title": "query",
      "query": "# Find a user by ID\nquery FindUser {\n  findUser(input: { id: \"1\" }) {\n    id\n    username\n    email\n    age\n  }\n}\n\n# Search users with filters\nquery SearchUsers {\n  searchUsers(input: { minAge: 25, maxAge: 35 }) {\n    id\n    username\n    age\n  }\n}\n\n# Find a post using custom arg name\nquery FindPost {\n  findPost(criteria: { id: \"1\" }) {\n    id\n    title\n    content\n  }\n}\n\n# Create a new user\nmutation CreateUser {\n  createUser(\n    input: {\n      username: \"newuser\"\n      email: \"newuser@example.com\"\n      password: \"SecurePass123\"\n      age: 25\n    }\n  ) {\n    id\n    username\n    email\n  }\n}\n\n# Update a user\nmutation UpdateUser {\n  updateUser(input: { id: \"1\", email: \"newemail@example.com\" }) {\n    id\n    username\n    email\n  }\n}"
    }
  ]
}
