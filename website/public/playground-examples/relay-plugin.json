{
  "id": "relay-plugin",
  "title": "Relay Plugin",
  "description": "Use the Relay plugin for cursor-based pagination and global IDs",
  "tags": [],
  "files": [
    {
      "filename": "schema.ts",
      "content": "import SchemaBuilder from '@pothos/core';\nimport RelayPlugin from '@pothos/plugin-relay';\n\nconst builder = new SchemaBuilder({\n  plugins: [RelayPlugin],\n  relay: {\n    // Configure relay options\n    clientMutationId: 'omit',\n    cursorType: 'String',\n  },\n});\n\n// Mock data\nconst posts = [\n  { id: '1', title: 'First Post', content: 'Hello World', published: true },\n  { id: '2', title: 'Second Post', content: 'GraphQL is awesome', published: true },\n  { id: '3', title: 'Third Post', content: 'Relay makes pagination easy', published: false },\n  { id: '4', title: 'Fourth Post', content: 'Pothos is type-safe', published: true },\n  { id: '5', title: 'Fifth Post', content: 'Building APIs is fun', published: true },\n];\n\nconst users = [\n  { id: '1', name: 'Alice', email: 'alice@example.com' },\n  { id: '2', name: 'Bob', email: 'bob@example.com' },\n  { id: '3', name: 'Charlie', email: 'charlie@example.com' },\n];\n\n// Define User and Post refs\nconst UserRef = builder.objectRef<{ id: string; name: string; email: string }>('User');\nconst PostRef = builder.objectRef<{ id: string; title: string; content: string; published: boolean }>('Post');\n\n// Define a User node\nconst User = builder.node(UserRef, {\n  id: {\n    resolve: (user) => user.id,\n  },\n  loadOne: (id) => users.find((u) => u.id === id) || null,\n  loadMany: (ids) => ids.map((id) => users.find((u) => u.id === id) || null),\n  fields: (t) => ({\n    name: t.exposeString('name'),\n    email: t.exposeString('email'),\n  }),\n});\n\n// Define a Post node\nconst Post = builder.node(PostRef, {\n  id: {\n    resolve: (post) => post.id,\n  },\n  loadOne: (id) => posts.find((p) => p.id === id) || null,\n  loadMany: (ids) => ids.map((id) => posts.find((p) => p.id === id) || null),\n  fields: (t) => ({\n    title: t.exposeString('title'),\n    content: t.exposeString('content'),\n    published: t.exposeBoolean('published'),\n  }),\n});\n\n// Query with connection fields\nbuilder.queryType({\n  fields: (t) => ({\n    // Connection for posts with cursor-based pagination\n    posts: t.connection({\n      type: Post,\n      resolve: (parent, args) => {\n        // Simple implementation - in production you'd query from a database\n        return {\n          edges: posts.map((post, index) => ({\n            cursor: `cursor:${index}`,\n            node: post,\n          })),\n          pageInfo: {\n            hasNextPage: false,\n            hasPreviousPage: false,\n            startCursor: 'cursor:0',\n            endCursor: `cursor:${posts.length - 1}`,\n          },\n        };\n      },\n    }),\n\n    // Connection for users\n    users: t.connection({\n      type: User,\n      resolve: () => ({\n        edges: users.map((user, index) => ({\n          cursor: `cursor:${index}`,\n          node: user,\n        })),\n        pageInfo: {\n          hasNextPage: false,\n          hasPreviousPage: false,\n          startCursor: 'cursor:0',\n          endCursor: `cursor:${users.length - 1}`,\n        },\n      }),\n    }),\n\n    // Single node lookup by global ID\n    // This is automatically provided by the relay plugin as 'node' field\n  }),\n});\n\nexport const schema = builder.toSchema();",
      "language": "typescript"
    }
  ],
  "defaultQuery": "# Query posts with connection/pagination\nquery PostsConnection {\n  posts(first: 3) {\n    edges {\n      cursor\n      node {\n        id\n        title\n        content\n        published\n      }\n    }\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n  }\n}\n\n# Query users connection\nquery UsersConnection {\n  users(first: 2) {\n    edges {\n      cursor\n      node {\n        id\n        name\n        email\n      }\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n    }\n  }\n}\n\n# Query a specific node by global ID\nquery NodeQuery {\n  node(id: \"UG9zdDox\") {\n    id\n    ... on Post {\n      title\n      content\n    }\n    ... on User {\n      name\n      email\n    }\n  }\n}",
  "queries": [
    {
      "title": "query",
      "query": "# Query posts with connection/pagination\nquery PostsConnection {\n  posts(first: 3) {\n    edges {\n      cursor\n      node {\n        id\n        title\n        content\n        published\n      }\n    }\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n  }\n}\n\n# Query users connection\nquery UsersConnection {\n  users(first: 2) {\n    edges {\n      cursor\n      node {\n        id\n        name\n        email\n      }\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n    }\n  }\n}\n\n# Query a specific node by global ID\nquery NodeQuery {\n  node(id: \"UG9zdDox\") {\n    id\n    ... on Post {\n      title\n      content\n    }\n    ... on User {\n      name\n      email\n    }\n  }\n}"
    }
  ]
}
